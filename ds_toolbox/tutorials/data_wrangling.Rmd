#R for Data Scouting and Wrangling

##Basic Syntax
###Objects and Vectors
```{r}
getwd()
x <- 1
y <- 3
z <- x + y

vector <- c(1, 3, 6, 9, 8)
vector2<- c(1,1,1,1,2)
vector_sumado <- vector+vector2
vector_sumado[1]
vector_sumado[8]
```
###Strings
```{r}
saludo <- "hola scout"
print(saludo)
saludos <- paste(saludo, "s", sep="")
print(saludos)
```


#Reading Data
csv, psv, xlsx, dbf

```{r}
df <- read.csv("../hw1_data.csv")

library(readxl)
df_xlsx <- read_excel("estatal.xlsx")

library(foreign)
df_dbf <-read.dbf("TSDem.dbf")
```

#Exploring Data

```{r}
dim(df)
str(df)
sum(is.na(df$Ozone))

colMeans(is.na(df[,]))
```
#Useful recodifications
dates & cvegeos

```{r}
env <- read.csv("envipe2015admin1.csv")
head(env$cvegeo)

env$cvegeo <- sprintf("%02d",env$cvegeo)
head(env$cvegeo)


time <- Sys.time()
print(time)
month <- format(time, "%b")
print(month)
year<- format(time, "%Y")
print(year)
num_month <- format(time, "%m")
print(num_month)
```
#dplyr

###Installation
```{r}
install.packages("dplyr")
library(dplyr)
```

###What is it?
"A fast, consistent tool for working with data frame like objects, both in memory and out of memory"
-CRAN

###What's new about it?
- verbs
- "grammar of data wrangling"
- new way of thinking about data manipulation
- efficient data storage backends

###What is it good for?

![alt text](tidy.png)

dplyr, using %>% passes the object on theleft hand side as the first argument of function on the right.


#Filter & Subset
```{r}
library(dplyr)

zacatecas <- env %>%
dplyr::filter(cvegeo == '32')


dim(zacatecas)
print(zacatecas)

col_insegura <- env %>%
dplyr::select(cvegeo, colonia_insegura)

dim(col_insegura)
print(col_insegura)
```

#Remove duplicates
```{r}
envipe_sin_duplicados <- env %>%
distinct()
```


#Making new columns
```{r}
env_mutated <- env %>%
dplyr::mutate(promedio_victimizacion = (victimizacion_hogar_b + victimizacion_hogar_a)/2)

#rankeo de filas
x <- dplyr::mutate_each(env, funs(min_rank))
```
#Group by & Summarise
```{r}

```
#Reshape

#merge/join



#making metadata

#sanity checks


```{r}

```